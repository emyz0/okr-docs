/Users/emirhanyilmaz/Desktop/okr-docs/reranker_server.py:38: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
INFO:     Started server process [54002]
INFO:     Waiting for application startup.
INFO:__main__:ğŸ¤– Qwen3-Reranker-4B model yÃ¼kleniyor...
INFO:__main__:ğŸ“ Device: cpu
INFO:__main__:âœ… Tokenizer yÃ¼klendi (pad_token=<|endoftext|>, pad_token_id=151643)
`torch_dtype` is deprecated! Use `dtype` instead!
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:08<00:08,  8.10s/it]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:23<00:00, 12.34s/it]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:23<00:00, 11.79s/it]
Some weights of Qwen3ForSequenceClassification were not initialized from the model checkpoint at Qwen/Qwen3-Reranker-4B and are newly initialized: ['score.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
INFO:__main__:âœ… Model baÅŸarÄ±yla yÃ¼klendi
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:__main__:ğŸ”„ Reranking baÅŸladÄ±: sorgu='pdfteki gÃ¶rsele gÃ¶re 4 bits kaÃ§ colores?...', dokÃ¼=10
INFO:__main__:   ï¿½ Batch 1: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 2: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 3: 2 pair iÅŸleniyor...
INFO:__main__:   âœ… Scores hesaplandÄ±: [0.8667623996734619, 0.9688963890075684, 0.9554563760757446]...
INFO:__main__:âœ… Reranking tamamlandÄ±: top 10 seÃ§ildi
INFO:__main__:   En yÃ¼ksek skor: 0.9809
INFO:     127.0.0.1:53362 - "POST /rerank HTTP/1.1" 200 OK
INFO:__main__:ğŸ”„ Reranking baÅŸladÄ±: sorgu='ÅŸekil 5'e gÃ¶re giyim modasÄ±nda tasarÄ±m deÄŸiÅŸkenler...', dokÃ¼=10
INFO:__main__:   ï¿½ Batch 1: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 2: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 3: 2 pair iÅŸleniyor...
INFO:__main__:   âœ… Scores hesaplandÄ±: [0.30278700590133667, 0.8419823050498962, 0.9423085451126099]...
INFO:__main__:âœ… Reranking tamamlandÄ±: top 10 seÃ§ildi
INFO:__main__:   En yÃ¼ksek skor: 0.9423
INFO:     127.0.0.1:53432 - "POST /rerank HTTP/1.1" 200 OK
INFO:__main__:ğŸ”„ Reranking baÅŸladÄ±: sorgu='Ä°statistiki Verilerin GÃ¶sterim Tipleri nelerdir?...', dokÃ¼=10
INFO:__main__:   ï¿½ Batch 1: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 2: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 3: 2 pair iÅŸleniyor...
INFO:__main__:   âœ… Scores hesaplandÄ±: [0.9140248894691467, 0.5127962231636047, 0.8792442083358765]...
INFO:__main__:âœ… Reranking tamamlandÄ±: top 10 seÃ§ildi
INFO:__main__:   En yÃ¼ksek skor: 0.9727
INFO:     127.0.0.1:53495 - "POST /rerank HTTP/1.1" 200 OK
INFO:__main__:ğŸ”„ Reranking baÅŸladÄ±: sorgu='sÄ±nÄ±f geniÅŸliÄŸi nedir? ...', dokÃ¼=10
INFO:__main__:   ï¿½ Batch 1: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 2: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 3: 2 pair iÅŸleniyor...
INFO:__main__:   âœ… Scores hesaplandÄ±: [0.476348876953125, 0.20565150678157806, 0.7685051560401917]...
INFO:__main__:âœ… Reranking tamamlandÄ±: top 10 seÃ§ildi
INFO:__main__:   En yÃ¼ksek skor: 0.9863
INFO:     127.0.0.1:53536 - "POST /rerank HTTP/1.1" 200 OK
INFO:__main__:ğŸ”„ Reranking baÅŸladÄ±: sorgu='tablo 15'e gÃ¶re yeterli beslenen erkek ve kadÄ±nlar...', dokÃ¼=10
INFO:__main__:   ï¿½ Batch 1: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 2: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 3: 2 pair iÅŸleniyor...
INFO:__main__:   âœ… Scores hesaplandÄ±: [0.1831805408000946, 0.24482984840869904, 0.20806801319122314]...
INFO:__main__:âœ… Reranking tamamlandÄ±: top 10 seÃ§ildi
INFO:__main__:   En yÃ¼ksek skor: 0.8868
INFO:     127.0.0.1:53648 - "POST /rerank HTTP/1.1" 200 OK
INFO:__main__:ğŸ”„ Reranking baÅŸladÄ±: sorgu='Grafik 6. Ankara Hastanesiâ€™nde Ã‡alÄ±ÅŸan SaÄŸlÄ±k Pers...', dokÃ¼=10
INFO:__main__:   ï¿½ Batch 1: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 2: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 3: 2 pair iÅŸleniyor...
INFO:__main__:   âœ… Scores hesaplandÄ±: [0.26917073130607605, 0.4014338552951813, 0.4701046049594879]...
INFO:__main__:âœ… Reranking tamamlandÄ±: top 10 seÃ§ildi
INFO:__main__:   En yÃ¼ksek skor: 0.4701
INFO:     127.0.0.1:53681 - "POST /rerank HTTP/1.1" 200 OK
INFO:__main__:ğŸ”„ Reranking baÅŸladÄ±: sorgu='Tablo 11: YÄ±llara ve SektÃ¶rlere GÃ¶re Hastanelerde ...', dokÃ¼=10
INFO:__main__:   ï¿½ Batch 1: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 2: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 3: 2 pair iÅŸleniyor...
INFO:__main__:   âœ… Scores hesaplandÄ±: [0.12012352049350739, 0.44884786009788513, 0.1350509524345398]...
INFO:__main__:âœ… Reranking tamamlandÄ±: top 10 seÃ§ildi
INFO:__main__:   En yÃ¼ksek skor: 0.8748
INFO:     127.0.0.1:53718 - "POST /rerank HTTP/1.1" 200 OK
INFO:__main__:ğŸ”„ Reranking baÅŸladÄ±: sorgu='Tablo 14: . Ä°BBS-1â€™e GÃ¶re DoÄŸum ve Antenatal BakÄ±m...', dokÃ¼=10
INFO:__main__:   ï¿½ Batch 1: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 2: 4 pair iÅŸleniyor...
INFO:__main__:   ï¿½ Batch 3: 2 pair iÅŸleniyor...
INFO:__main__:   âœ… Scores hesaplandÄ±: [0.24581000208854675, 0.059305839240550995, 0.5661844611167908]...
INFO:__main__:âœ… Reranking tamamlandÄ±: top 10 seÃ§ildi
INFO:__main__:   En yÃ¼ksek skor: 0.8918
INFO:     127.0.0.1:53756 - "POST /rerank HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [54002]
